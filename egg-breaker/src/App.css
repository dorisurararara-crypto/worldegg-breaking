#root {
  width: 100%;
  min-height: 100%;
  margin: 0;
  padding: 0;
}

body {
  margin: 0;
  padding: 0;
  width: 100vw;
  min-height: 100vh;
  background: linear-gradient(135deg, #fff0f5 0%, #e6e6fa 100%); /* Lavender Blush to Lavender */
  background-size: 400% 400%;
  animation: gradientBG 15s ease infinite;
  color: #5d4037; /* Soft Brown */
  font-family: 'Fredoka', sans-serif;
  overflow-y: auto; /* Allow vertical scrolling */
  overflow-x: hidden;
  touch-action: manipulation; /* Prevent zoom/pan delays */
  user-select: none; /* Prevent text selection */
  position: relative;
}

/* Floating Bubbles/Clouds Background Effect */
body::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    radial-gradient(rgba(255, 255, 255, 0.6) 20%, transparent 20%),
    radial-gradient(rgba(255, 255, 255, 0.4) 20%, transparent 20%);
  background-position: 0 0, 50px 50px;
  background-size: 100px 100px;
  opacity: 0.5;
  animation: floatBackground 20s linear infinite;
  pointer-events: none;
  z-index: -1;
}

@keyframes floatBackground {
  0% { background-position: 0 0, 50px 50px; }
  100% { background-position: 100px 100px, 150px 150px; }
}

@keyframes gradientBG {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* --- Tense Theme (HP 20% ~ 70%) --- */
html.tense-theme, html.tense-theme body, body.tense-theme {
  background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%) !important; /* Deep Blue/Twilight */
  animation: tenseBackground 5s ease infinite alternate !important;
}
html.tense-theme .title, body.tense-theme .title {
  background: linear-gradient(to right, #ffd700, #ff8c00); /* Gold/Orange */
  -webkit-background-clip: text;
  text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

@keyframes tenseBackground {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}

/* --- Dark / Danger Theme (HP < 20%) --- */
html.dark-theme, html.dark-theme body, body.dark-theme {
  background: linear-gradient(135deg, #2b0a0a 0%, #4a0000 100%) !important;
  animation: pulseBackground 2s infinite alternate !important;
}
html.dark-theme body::before, body.dark-theme::before {
  opacity: 0.1; /* Dim bubbles */
}
html.dark-theme .title, body.dark-theme .title {
  background: linear-gradient(to right, #ff0000, #ff4d4d);
  -webkit-background-clip: text;
  text-shadow: 0 0 10px rgba(255, 0, 0, 0.8);
}
html.dark-theme .game-area, body.dark-theme .game-area {
  border: 2px solid #ff0000;
  box-shadow: 0 0 30px rgba(255, 0, 0, 0.2);
}

@keyframes pulseBackground {
  from { box-shadow: inset 0 0 50px #000; }
  to { box-shadow: inset 0 0 100px #ff0000; }
}

.app-container {
  display: flex;
  flex-direction: column;
  min-height: 100vh; /* Allow growth */
  width: 100vw;
  background: transparent; /* Body handles background */
}

/* --- Navigation --- */
.navbar {
  height: 65px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 10px;
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.8);
  position: relative; /* Ensure z-index works */
  z-index: 1501; /* Above backdrop (1500) */
  box-shadow: 0 4px 15px rgba(0,0,0,0.03);
}

.nav-left, .nav-right {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 90px; /* 좌우 너비 고정으로 중앙 정렬 확보 */
}

.nav-left {
  justify-content: flex-start;
}

.nav-right {
  justify-content: flex-end;
}

/* Mobile Spacer (Invisible) */
.mobile-spacer {
  width: 40px; /* 오른쪽 버튼 하나 크기만큼 확보 */
  height: 40px;
  visibility: hidden;
}

/* Logo Container */
.logo-container {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Logo Text Style */
.logo-text {
  font-size: 1.5rem; /* 폰트 키움 */
  font-weight: 900;
  background: linear-gradient(45deg, #ff9a9e, #fad0c4);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
  white-space: nowrap;
  position: relative;
  z-index: 2;
  /* 텍스트 외곽선 효과 (가독성 UP) */
  filter: drop-shadow(2px 2px 0px rgba(255, 255, 255, 0.8)); 
}

/* Mobile Toggle Buttons - Icon Only Style */
.mobile-toggle-btn {
  display: none; /* Desktop default */
  background: #ffffff;
  border: 2px solid #ffb7b2;
  color: #ff6f61;
  font-size: 1.2rem;
  cursor: pointer;
  width: 40px;
  height: 40px;
  border-radius: 50%; /* 완전 원형 */
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 5px rgba(255, 111, 97, 0.1);
  padding: 0;
  transition: transform 0.2s;
}

.mobile-toggle-btn:active {
  transform: scale(0.9);
}

/* Simple Lang Button (Flag Only) */
.lang-btn-simple {
  background: #ffffff;
  border: 2px solid #ffe4e1;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  font-size: 1.4rem;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  padding: 0;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}

/* Removed old .logo style */

.lang-selector {
  position: relative;
}

.lang-dropdown {
  position: absolute;
  top: 120%;
  right: 0;
  background: #ffffff;
  border: 1px solid #ffe4e1;
  border-radius: 15px;
  overflow: hidden;
  z-index: 2001; /* Higher than panels */
  width: 140px;
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

/* --- Mobile Responsive Styles --- */
@media (max-width: 900px) {
  .navbar {
    padding: 0 10px; /* 좌우 여백 줄임 */
  }

  .mobile-toggle-btn {
    display: flex; /* 모바일에서 보임 */
  }

  .logo {
    font-size: 1.2rem; /* 모바일에서 로고 크기 축소 */
  }
  
  /* 중앙 로고가 너무 길면 말줄임 */
  .logo-container {
    padding: 0 10px;
  }
}

.lang-dropdown div {
  padding: 12px 15px;
  cursor: pointer;
  transition: 0.2s;
  color: #5d4037;
  font-weight: 500;
}

.lang-dropdown div:hover {
  background: #fff0f5;
  color: #ff69b4;
}

/* --- Main Layout Grid --- */
.main-layout {
  display: flex;
  flex: 1;
  /* overflow: hidden; Removed to allow scroll */
  position: relative;
  gap: 20px;
  padding: 20px;
  flex-direction: column; /* Mobile default: stack */
}

@media (min-width: 901px) {
  .main-layout {
      flex-direction: row; /* Desktop: row */
  }
}

/* Common Panel Styles - Glassmorphism Light */
.panel {
  width: 320px;
  background: rgba(255, 255, 255, 0.65);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.8);
  border-radius: 30px;
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  overflow-y: auto;
  transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.05);
}

.left-panel { border-right: 1px solid rgba(255, 255, 255, 0.1); }
.info-panel { border-right: 1px solid rgba(255, 255, 255, 0.1); left: 0; transform: translateX(-100%); }
.right-panel { border-left: 1px solid rgba(255, 255, 255, 0.1); }

/* Panel Header */
.panel-header {
  padding: 20px;
  background: rgba(255, 255, 255, 0.5);
  border-bottom: 1px solid rgba(255, 255, 255, 0.5);
  position: sticky;
  top: 0;
  z-index: 10;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-radius: 30px 30px 0 0;
}

.panel h3 {
  margin: 0;
  font-size: 1.2rem;
  color: #ff6f61; /* Coral Pink */
  font-weight: 700;
}

.panel-close-btn {
  display: none;
  background: #ffe4e1;
  border: none;
  color: #ff6f61;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  font-size: 1.2rem;
  cursor: pointer;
  align-items: center;
  justify-content: center;
}

/* --- Game Area (Center) --- */
.game-area {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start; /* Start from top */
  position: relative;
  /* overflow: hidden; Removed */
  padding: 10px;
  border-radius: 30px;
  padding-bottom: 50px; /* Space for footer */
}

.header-glow {
  text-align: center;
  margin-bottom: 10px;
  z-index: 5;
}

.title {
  font-size: 2.5rem;
  margin: 0;
  background: linear-gradient(to right, #ff9966, #ff5e62);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  font-weight: 800;
  filter: drop-shadow(0 2px 4px rgba(255, 94, 98, 0.2));
}

.subtitle {
  color: #8d6e63;
  margin: 5px 0 0;
  font-size: 1rem;
  font-weight: 500;
}

/* Egg Stage */
.egg-stage {
  position: relative;
  width: 100%;
  max-width: 500px;
  height: 40vh;
  min-height: 300px;
  display: flex;
  align-items: center;
  justify-content: center;
  user-select: none;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
}

.egg-svg-container {
  width: auto;
  height: 100%;
  max-width: 80%;
  transition: transform 0.1s;
  filter: drop-shadow(0 10px 20px rgba(255, 182, 193, 0.4));
}

.egg-svg {
  width: 100%;
  height: 100%;
}

.shake {
  animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
}

@keyframes shake {
  10%, 90% { transform: translate3d(-2px, 0, 0) rotate(-2deg); }
  20%, 80% { transform: translate3d(3px, 0, 0) rotate(2deg); }
  30%, 50%, 70% { transform: translate3d(-4px, 0, 0) rotate(-2deg); }
  40%, 60% { transform: translate3d(4px, 0, 0) rotate(2deg); }
}

/* Status Row & Power Button */
.hp-wrapper {
  width: 100%;
  max-width: 80%;
  text-align: center;
  margin-bottom: 20px;
  background: rgba(255, 255, 255, 0.5);
  padding: 10px;
  border-radius: 20px;
}

.hp-container {
  width: 100%;
  height: 24px;
  background: #ffe4e1;
  border-radius: 12px;
  overflow: hidden;
  border: 2px solid #ffb6c1;
  box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
}

.hp-bar {
  height: 100%;
  background: linear-gradient(90deg, #ff9a9e, #fad0c4);
  transition: width 0.2s ease-out;
  border-radius: 10px;
}

.hp-text {
  margin-top: 5px;
  font-weight: 700;
  font-size: 1.1rem;
  color: #ff6f61;
}

.power-btn {
  background: linear-gradient(45deg, #89f7fe, #66a6ff);
  border: none;
  border-radius: 50px;
  padding: 12px 35px;
  color: white;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  display: flex;
  flex-direction: column;
  align-items: center;
  box-shadow: 0 10px 20px rgba(102, 166, 255, 0.3);
  margin-bottom: 20px;
}

.power-btn:hover {
  transform: scale(1.05) translateY(-2px);
  box-shadow: 0 15px 25px rgba(102, 166, 255, 0.4);
}

.btn-title { font-weight: 700; font-size: 1.1rem; }
.btn-sub { font-size: 0.8rem; opacity: 0.9; }

.status-row {
  display: flex;
  gap: 25px;
  font-size: 1.1rem;
  padding: 12px 25px;
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.7);
  border: 1px solid rgba(255, 255, 255, 0.9);
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  color: #5d4037;
}

.status-row span {
  font-weight: 800;
  color: #ff6f61;
  margin-left: 6px;
}

/* Lists (Users, Shop) */
.scroll-box, .shop-list {
  flex: 1;
  overflow-y: auto;
  padding: 15px;
}

/* Scrollbar Styling */
::-webkit-scrollbar {
  width: 8px;
}
::-webkit-scrollbar-track {
  background: rgba(0,0,0,0.02);
}
::-webkit-scrollbar-thumb {
  background: #ffb6c1;
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
  background: #ff9a9e;
}

.user-row {
  display: flex;
  justify-content: space-between;
  padding: 12px 15px;
  margin-bottom: 8px;
  background: #ffffff;
  border-radius: 15px;
  border: 1px solid #f0f0f0;
  box-shadow: 0 2px 5px rgba(0,0,0,0.02);
  transition: transform 0.2s;
}

.user-row:hover {
  transform: translateX(3px);
  border-color: #ffe4e1;
}

.flag { font-size: 1.4rem; }
.count { font-weight: 700; color: #ff6f61; }

/* Shop Item Styling */
.shop-item {
  display: flex;
  align-items: center;
  gap: 15px;
  background: #ffffff;
  margin-bottom: 15px;
  padding: 15px;
  border-radius: 20px;
  cursor: pointer;
  transition: all 0.2s;
  border: 2px solid transparent;
  box-shadow: 0 4px 10px rgba(0,0,0,0.03);
  position: relative;
  overflow: hidden;
}

.shop-item:hover {
  background: #fffafa;
  border-color: #ffb6c1;
  transform: translateY(-4px);
  box-shadow: 0 10px 20px rgba(255, 182, 193, 0.2);
}

.shop-item .icon { font-size: 2.2rem; }
.shop-item .info h4 { margin: 0; font-size: 1.1rem; color: #5d4037; }
.shop-item .price { color: #ff9a9e; font-weight: 700; font-size: 0.95rem; margin-top: 4px; }

.info-box {
  padding: 20px;
  background: rgba(255, 255, 255, 0.6);
  margin: 10px;
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.8);
}
.info-box h4 { margin: 0 0 8px 0; color: #ff6f61; font-size: 1rem; font-weight: 700; }
.info-box p { margin: 0; font-size: 0.9rem; line-height: 1.6; color: #6d4c41; }
.info-box a { color: #66a6ff; text-decoration: none; font-weight: 600; }

.total-badge {
  text-align: center;
  padding: 15px;
  background: rgba(255, 255, 255, 0.5);
  color: #ff6f61;
  font-weight: 800;
  font-size: 1.1rem;
  border-top: 1px solid rgba(255, 255, 255, 0.5);
}

/* Modal */
.modal-overlay {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(255, 240, 245, 0.85); /* Light pink overlay */
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
  backdrop-filter: blur(8px);
}

.modal-content {
  background: #ffffff;
  padding: 40px;
  border-radius: 40px;
  text-align: center;
  border: 4px solid #ffb6c1;
  box-shadow: 0 20px 50px rgba(255, 182, 193, 0.4);
  animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes popIn {
  from { opacity: 0; transform: scale(0.8) translateY(20px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}

.modal-content input {
  display: block;
  width: 90%;
  margin: 20px auto;
  padding: 15px;
  border-radius: 15px;
  border: 2px solid #ffe4e1;
  background: #fffafa;
  color: #5d4037;
  font-family: 'Fredoka', sans-serif;
  font-size: 1rem;
  outline: none;
}
.modal-content input:focus {
  border-color: #ffb6c1;
}

.send-btn {
  background: linear-gradient(45deg, #ff9a9e, #fad0c4);
  color: #ffffff;
  border: none;
  padding: 15px 40px;
  font-weight: 800;
  border-radius: 30px;
  cursor: pointer;
  font-size: 1.1rem;
  box-shadow: 0 10px 20px rgba(255, 154, 158, 0.3);
  transition: transform 0.2s;
}
.send-btn:hover {
  transform: scale(1.05);
}

.round-over-message {
    color: #ff6f61;
    text-align: center;
    background: white;
    padding: 30px;
    border-radius: 30px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

/* Animations */
.tool-float {
  pointer-events: none;
  z-index: 5;
  filter: drop-shadow(0 4px 8px rgba(0,0,0,0.15));
}

@keyframes toolPop {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5) rotate(-20deg); }
  30% { opacity: 1; transform: translate(-50%, -50%) scale(1.1) rotate(0deg); }
  100% { opacity: 0; transform: translate(-50%, -80%) scale(1.2) rotate(10deg); }
}

@keyframes particlePop {
  0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
  50% { opacity: 1; transform: translate(-50%, -150%) scale(1.2) rotate(45deg); }
  100% { opacity: 0; transform: translate(-50%, -200%) scale(0) rotate(90deg); }
}

.damage-float {
  position: absolute;
  transform: translate(-50%, -50%);
  color: #ff6f61; /* Soft Red */
  font-weight: 900;
  font-size: 2rem;
  animation: floatUp 0.8s ease-out forwards;
  pointer-events: none;
  text-shadow: 2px 2px 0 #ffffff;
}

@keyframes floatUp {
  0% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  100% { opacity: 0; transform: translate(-50%, -150%) scale(1.3); }
}

@keyframes bounceIn {
  0% { opacity: 0; transform: translate(-50%, -60%) scale(0.5); }
  60% { opacity: 1; transform: translate(-50%, -45%) scale(1.1); }
  100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* --- Mobile Responsive Styles --- */
@media (min-width: 901px) {
    .main-layout {
        display: grid;
        grid-template-columns: 320px 1fr 320px; /* 3-Column Layout */
        gap: 30px;
        padding: 30px;
        max-width: 1600px;
        margin: 0 auto;
        min-height: calc(100vh - 80px); /* Use min-height */
    }

    .panel {
        position: relative; /* Not fixed */
        transform: none !important; /* Always visible */
        opacity: 1 !important;
        pointer-events: auto !important;
        width: 100%; /* Fill grid cell */
        height: 100%;
        border-radius: 30px;
        background: rgba(255, 255, 255, 0.4); /* Slightly more transparent on desktop */
        border: 1px solid rgba(255, 255, 255, 0.6);
        box-shadow: 0 10px 30px rgba(0,0,0,0.05);
    }

    /* Hide InfoPanel (Hall of Fame) by default on desktop if not needed, or put it somewhere else. 
       Currently the design has Left (Users), Center (Game), Right (Shop). 
       InfoPanel (Menu) is toggled in mobile. On desktop, maybe we don't need it or it can be a modal?
       For now, let's hide the InfoPanel (Menu) on desktop to keep the 3-column symmetry (Left vs Right).
       The "Menu" content (Winners) is duplicated in LeftPanel? No, I removed it from LeftPanel.
       So InfoPanel is the only place for Winners.
       Let's make InfoPanel appear as a floating modal or just hide it and add a button?
       The user said "데스크탑에서는 메뉴와 접속자 이런게 다겹쳐있고".
       Let's stick to Left (Users) and Right (Shop). 
       Where does InfoPanel go? 
       Maybe LeftPanel can include the "Recent Winners" again for Desktop?
       Or, let's just Hide InfoPanel for now to fix the layout, and if the user wants it, I can add it back.
       Actually, the `InfoPanel` has class `info-panel`. I will hide it on desktop layout grid, 
       but maybe keep the button to show it as a modal?
       The current structure renders ALL panels in the DOM.
       
       Let's make:
       Column 1: LeftPanel (Users)
       Column 2: GameArea
       Column 3: RightPanel (Shop)
       
       InfoPanel will be hidden by default on desktop, or we can make it a floating absolute panel if toggled.
       Since `mobilePanel` state controls visibility logic which is mobile-centric ('left', 'right', 'none'),
       on Desktop we want Left and Right ALWAYS open.
       
       I need to override the `active` class logic for Desktop.
       On Desktop, Left and Right panels should ignore the `active` class and just be visible.
    */
    
    .left-panel, .right-panel {
        display: flex;
        z-index: 10;
    }

    .info-panel {
        /* InfoPanel (Menu) remains hidden or behaves like a modal */
        position: absolute; 
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%) !important;
        width: 400px;
        height: 600px;
        z-index: 1000;
        background: rgba(255, 255, 255, 0.95);
        border: 2px solid #fff;
        box-shadow: 0 20px 50px rgba(0,0,0,0.2);
        display: none; /* Hidden by default */
    }
    
    .info-panel.active {
        display: flex; /* Show only when active */
    }

    .panel-close-btn {
        display: none; /* No close button for fixed panels */
    }
    
    /* Show close button ONLY for InfoPanel on desktop */
    .info-panel .panel-close-btn {
        display: flex;
    }

    .game-area {
        padding: 0;
    }
    
    .title { font-size: 3.5rem; }
    .egg-stage { height: 50vh; }
}

@media (min-width: 901px) {
    .title { font-size: 3rem; }
    .egg-stage { height: 450px; }
}

/* --- Mobile Responsive Styles (Modern Bottom Sheet Design) --- */
@media (max-width: 900px) {
  .app-container {
      background: transparent; /* Fix: Allow body background to show through */
  }

  .main-layout {
      padding: 0; /* Full width for game area */
      gap: 0;
      height: calc(100vh - 65px); /* Minus navbar */
      overflow: hidden; /* Prevent body scroll when game is active */
  }
  
  .game-area {
      padding: 10px;
      padding-bottom: 80px; /* Space for footer controls if any */
      height: 100%;
      overflow-y: auto; /* Allow scrolling within game area */
      justify-content: flex-start;
  }

/* --- Cute Bubbly Animations --- */
@keyframes bubbly {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  25% { transform: translateY(-5px) rotate(-2deg); }
  75% { transform: translateY(-3px) rotate(2deg); }
}

@keyframes rainbow-glow {
  0% { color: #ff9a9e; filter: drop-shadow(0 0 5px #ff9a9e); }
  33% { color: #a1c4fd; filter: drop-shadow(0 0 5px #a1c4fd); }
  66% { color: #c2ffd8; filter: drop-shadow(0 0 5px #c2ffd8); }
  100% { color: #ff9a9e; filter: drop-shadow(0 0 5px #ff9a9e); }
}

@keyframes breathing {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.03); }
}

.title {
  font-size: 2.8rem;
  margin: 0;
  font-weight: 900;
  display: inline-block;
  animation: bubbly 3s ease-in-out infinite, rainbow-glow 8s linear infinite;
  letter-spacing: -1px;
  cursor: default;
  user-select: none;
}

.subtitle {
  color: #8d6e63;
  margin: 5px 0 0;
  font-size: 0.9rem;
  font-weight: 600;
  opacity: 0.8;
}

/* --- Side Slide Transformation with Elastic Bounce --- */
.panel {
  position: fixed;
  top: 0;
  bottom: 0;
  width: 85%;
  height: 100vh;
  z-index: 2000;
  background: rgba(255, 255, 255, 0.98);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  transform: translateX(-105%); /* Hidden left */
  opacity: 1;
  pointer-events: auto;
  /* Elastic bounce effect */
  transition: transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  border: none;
  box-shadow: 0 0 50px rgba(255, 111, 97, 0.2);
  display: flex;
  flex-direction: column;
}

.left-panel, .info-panel {
  left: 0;
  border-radius: 0 40px 40px 0;
}

.right-panel {
  right: 0;
  left: auto;
  transform: translateX(105%); /* Hidden right */
  border-radius: 40px 0 0 40px;
}

.panel.active {
  transform: translateX(0) !important;
}

/* --- Floating Background Decorations --- */
.game-area::after {
  content: '☁️';
  position: absolute;
  top: 15%; left: 10%;
  font-size: 2rem; opacity: 0.4;
  animation: floatBackground 10s infinite alternate ease-in-out;
}

.game-area::before {
  content: '✨';
  position: absolute;
  bottom: 20%; right: 15%;
  font-size: 1.5rem; opacity: 0.3;
  animation: floatBackground 8s infinite alternate-reverse ease-in-out;
}

/* Egg Container Breathing */
.egg-stage {
  position: relative;
  width: 100%;
  max-width: 500px;
  height: 45vh;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: breathing 4s ease-in-out infinite;
}

/* Improved Damage Float */
.damage-float {
  position: absolute;
  font-family: 'Fredoka', sans-serif;
  pointer-events: none;
  animation: floatUpCute 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

@keyframes floatUpCute {
  0% { opacity: 0; transform: translate(-50%, 0) scale(0.5) rotate(-10deg); }
  20% { opacity: 1; transform: translate(-50%, -30px) scale(1.2) rotate(0deg); }
  100% { opacity: 0; transform: translate(-50%, -120px) scale(1.5) rotate(10deg); }
}

/* Side Toggles - Cuter & Better Positioned (Mobile Only) */
.side-toggle {
  position: fixed;
  top: 55%;
  transform: translateY(-50%);
  width: 45px;
  height: 90px;
  background: rgba(255, 255, 255, 0.65); /* More opaque */
  backdrop-filter: blur(8px);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 90;
  pointer-events: auto; /* Enable clicks */
  border: 2px solid rgba(255, 255, 255, 0.8);
  box-shadow: 0 8px 25px rgba(255, 111, 97, 0.15);
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@media (min-width: 901px) {
    .side-toggle { display: none; } /* Hide on desktop */
}

.side-toggle.left {
  left: -5px;
  border-radius: 0 30px 30px 0;
  animation: togglePulseLeft 3s infinite ease-in-out;
}

.side-toggle.right {
  right: -5px;
  border-radius: 30px 0 0 30px;
  animation: togglePulseRight 3s infinite ease-in-out;
}

.side-label {
  font-size: 0.65rem;
  color: #ff6f61;
  font-weight: 900;
  writing-mode: vertical-lr;
  margin-top: 5px;
  letter-spacing: 1px;
}

@keyframes togglePulseLeft {
  0%, 100% { transform: translateY(-50%) translateX(0); }
  50% { transform: translateY(-50%) translateX(10px); }
}

@keyframes togglePulseRight {
  0%, 100% { transform: translateY(-50%) translateX(0); }
  50% { transform: translateY(-50%) translateX(-10px); }
}

/* 제목 위치 상향 조정하여 겹침 방지 */
.header-glow {
  margin-bottom: 25px;
}

/* 쿠팡 문구 영역도 귀엽게 */
.coupang-notice {
  background: rgba(255, 255, 255, 0.4);
  padding: 5px 15px;
  border-radius: 10px;
  font-size: 10px !important;
}

}