/*
================================================================================
PROJECT: EGG PONG (World Egg Breaking Game) - FULL LATEST CONTEXT
DESCRIPTION: A global multiplayer clicking game where users break an egg together.
BACKEND: Cloudflare Workers + Durable Objects + D1 Database
FRONTEND: React + Vite + Capacitor (Mobile Support)
================================================================================
*/

// --- FILE: egg-backend/src/gameDO.ts (Backend Logic) ---
[FILE_CONTENT_START:egg-backend/src/gameDO.ts]
import { DurableObject } from "cloudflare:workers";

interface GameState {
  hp: number;
  maxHp: number;
  round: number;
  status: 'PLAYING' | 'WINNER_CHECK' | 'FINISHED';
  winnerInfo: any;
  winnerCheckStartTime: number;
  winningClientId?: string; 
  winningToken?: string;    
  clicksByCountry: Record<string, number>;
  maxAtk: number;
  maxAtkCountry: string;
  maxPoints: number;
  maxClicks: number;
  announcement: string;
  prize: string;
  prizeUrl: string;
  prizeImageUrl: string;
  prizeSecretUrl: string;
  nextPrizeName?: string;
  adUrl: string;
  recentWinners: any[];
  rev: number;
  lastUpdatedAt: number;
}

// ... [Full Class Implementation with Prize Pool Logic]
[FILE_CONTENT_END:egg-backend/src/gameDO.ts]

// --- FILE: egg-breaker/src/App.jsx (Frontend Core) ---
[FILE_CONTENT_START:egg-breaker/src/App.jsx]
import { useState, useEffect, useRef } from 'react';
// ... [Full Implementation with Clickable Guides & Sticky HP]
[FILE_CONTENT_END:egg-breaker/src/App.jsx]

// --- FILE: egg-breaker/src/components/GameArea.jsx (UI & Settings) ---
[FILE_CONTENT_START:egg-breaker/src/components/GameArea.jsx]
import React, { useState, useRef, useEffect } from 'react';
// ... [Full Implementation with 10 Breaking Stages & Refined Settings Box]
[FILE_CONTENT_END:egg-breaker/src/components/GameArea.jsx]

/* 
Note: The actual project_context.txt file contains the FULL code blocks for all files 
including Admin.jsx, useGameState.js, and CSS. 
*/